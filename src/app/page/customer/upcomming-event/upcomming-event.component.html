<!-- Ongoing Event Section -->
<div *ngIf="ongoingEvent" id="ongoing-event" class="container mt-5">
  <div class="card mb-3 mx-auto">
    <div class="row g-0">
      <div class="col-md-4">
        <img
          [src]="ongoingEvent.imageUrl"
          class="img-fluid rounded-start"
          alt="Ongoing Event"
        />
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title">{{ ongoingEvent.title }}</h5>
          <p class="card-text">{{ ongoingEvent.description }}</p>
          <p class="card-text">
            <img
              id="live-icon"
              src="https://img.icons8.com/?size=100&id=adICvKyfJgD7&format=png&color=000000"
              alt="Live"
            />
            <small class="text-body-secondary">Now Ongoing</small>
          </p>
          <button
            type="button"
            class="btn btn-outline-secondary"
            style="
              --bs-btn-padding-y: 0.25rem;
              --bs-btn-padding-x: 0.5rem;
              --bs-btn-font-size: 0.75rem;
            "
            (click)="showPopupSummary(ongoingEvent)"
          >
            View Details
          </button>
        </div>
        <div class="d-flex justify-content-end p-3" >
          <button class="btn btn-primary" type="button" (click)="agenda(ongoingEvent.eventId)">{{ isLoading ? 'Downloading...' : 'Download PDF' }}</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Upcoming Events Section -->
<div
  id="all-tasks"
  class="container m-5 mt-3"
  *ngIf="upcomingEvents.length > 0"
>
  <div class="mb-4">
    <h3>UPCOMING EVENTS</h3>
  </div>

  <div
    *ngFor="let event of upcomingEvents"
    class="card w-75 mb-3 position-relative"
  >
    <div class="card-body">
      <h5 class="card-title">{{ event.title }}</h5>
      <p class="card-text">{{ event.description }}</p>
      <div class="row">
        <p class="start-time col-4">Start: {{ event.startTime }}</p>
        <p class="end-time col-4">End: {{ event.endTime }}</p>
      </div>
    </div>

    <div
      class="status-icon position-absolute bottom-0 end-0 m-3 w-25 d-flex align-items-center justify-content-end"
    >
      <p class="more d-flex align-items-center mb-0 me-2">
        <span
          class="status-dot"
          [ngStyle]="{ 'background-color': getStatusColor(event.status) }"
        ></span>
        {{ event.status }}
      </p>
      <button
        type="button"
        class="btn btn-link p-0 mb-0 view-details"
        (click)="showPopupSummary(event)"
      >
        View More
      </button>
    </div>
  </div>
</div>

<div *ngIf="showPopup" class="modal-overlay">
  <div class="modal-content">
    <button class="close-btn" (click)="closePopup()">&times;</button>
    <app-pop-up-summary></app-pop-up-summary>
  </div>
</div>
